<core:FragmentDefinition 
    xmlns="sap.m" 
    xmlns:core="sap.ui.core" 
    xmlns:fb="sap.ui.comp.filterbar">
    
    <Dialog title="Resource Finder" contentWidth="60%" stretch="{device>/system/phone}">
        <content>
            <VBox class="sapUiSmallMargin">
                
                <fb:FilterBar id="resourceFilterBar" search="onSearchResources" showRestoreButton="false" showClearButton="true">
                    <fb:filterGroupItems>
                        <fb:FilterGroupItem groupName="G1" name="Skill" label="Required Skill / Role" visibleInFilterBar="true">
                            <fb:control>
                                <ComboBox id="skillFilter" items="{/Employees}">
                                    <core:Item key="{jobTitle}" text="{jobTitle}"/>
                                </ComboBox>
                            </fb:control>
                        </fb:FilterGroupItem>
                    </fb:filterGroupItems>
                </fb:FilterBar>

                <Table id="employeeTable" items="{path: '/Employees'}" mode="SingleSelectLeft">
                    <columns>
                        <Column><Text text="Employee"/></Column>
                        <Column><Text text="Role"/></Column>
                        <Column><Text text="Daily Capacity"/></Column>
                        <Column hAlign="Center"><Text text="Availability (Heatmap)"/></Column>
                    </columns>
                    <items>
                        <ColumnListItem>
                            <cells>
                                <ObjectIdentifier title="{firstName} {lastName}" text="{email}"/>
                                <Text text="{jobTitle}"/>
                                <Text text="{dailyCapacity} hrs"/>
                                
                                <ObjectStatus 
                                    text="{path: 'dailyCapacity', formatter: '.formatter.availabilityText'}" 
                                    state="{path: 'dailyCapacity', formatter: '.formatter.availabilityState'}" 
                                    icon="{path: 'dailyCapacity', formatter: '.formatter.availabilityIcon'}" />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>
        </content>
        
        <beginButton>
            <Button text="Assign Selected" type="Emphasized" press="onAssignEmployee"/>
        </beginButton>
        <endButton>
            <Button text="Cancel" press="onCloseResourceFinder"/>
        </endButton>
    </Dialog>
</core:FragmentDefinition>